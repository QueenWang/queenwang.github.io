
<!-- BEGIN CRITEO LOADER -->
<script async='async' type="text/javascript" src="https://static.criteo.net/js/ld/publishertag.js"></script>
<!-- END CRITEO LOADER -->

<script async='async' src='https://www.googletagservices.com/tag/js/gpt.js'></script>
<script>
  var googletag = googletag || {};
  googletag.cmd = googletag.cmd || [];
</script>
<script>
  googletag.cmd.push(function() {
    var responsiveSizeMapping = googletag.sizeMapping()
            .addSize([1050, 200], [[970, 250], [728, 90], [300, 250]])
            .addSize([0, 0], [160, 600])
            .build();
    googletag.defineSlot('/140800857/kun-test-responsive', [[970, 250], [728, 90], [300, 250], [160, 600]], 'div-gpt-ad-1508218762426-0')
            .defineSizeMapping(responsiveSizeMapping).addService(googletag.pubads());
    googletag.defineSlot('/140800857/kun-test-responsive', [728, 90], 'div-gpt-ad-1508218762426-1').addService(googletag.pubads());
    googletag.defineSlot('/140800857/kun-test-responsive', [[300, 600], [300, 250], [160, 600]], 'div-gpt-ad-1508218762426-2').addService(googletag.pubads());
    googletag.defineSlot('/140800857/kun-test-responsive', 'fluid', 'div-gpt-ad-1508218762426-3').addService(googletag.pubads());
    
    //out of page, creative choose custom type and MUST include impression tracker URL
   
    googletag.defineOutOfPageSlot('/140800857/kun-test-responsive', 'kun-test-oop').addService(googletag.pubads());
    
    googletag.pubads().enableSingleRequest();
    googletag.enableServices();
});

</script>

<script>
 var CriteoAdUnits = { "placements": [
         
{ "slotid": "div-gpt-ad-1508218762426-0", "zoneid": 1416088, "publishersubid": "test | 1 |2" }, // dummy zoneid 728x90
/*{ "slotid": "div-gpt-ad-1508218762426-1", "zoneid": 1416088, "publishersubid": "test | 1 ?22"  }, // dummy zoneid 728x90 */

{ "slotid": "div-gpt-ad-1508218762426-1", "zoneid": 1422956, "nativeCallback": function(assets) { 
            // Custom function to render the native ad.
            console.log(assets);
        } }, // dummy native test zone test (default 1 product, no binding done)
            
//{ "slotid": "div-gpt-ad-1508218762426-2", "zoneid":  1105264  }, // dummy zoneid 300x250
    { "slotid": "div-gpt-ad-1508218762426-2", "zoneid":  1416088, "publishersubid": "test | 1 &2"   }, // test AU tradingpost      
    { "slotid": "div-gpt-ad-1508218762426-3", "zoneid": 1416088, "publishersubid": "test | 1 |3"  }, /* Sanook - TH - CDB - SA - Native Ads - 300x180 */
    { "slotid": "kun-test-oop", "zoneid":1103957 },
]};


window.Criteo = window.Criteo || {};
window.Criteo.events = window.Criteo.events || [];


googletag.cmd.push(function() {
    googletag.pubads().disableInitialLoad();
});


var launchAdServer = function() {
    googletag.cmd.push(function() {
        console.log("execut launch ad sever callback");
        
        Criteo.SetDFPKeyValueTargeting();
        googletag.pubads().refresh();
    });
}

Criteo.events.push(function() {
    Criteo.SetLineItemRanges("0..30:0.01");
    Criteo.RequestBids(CriteoAdUnits, launchAdServer, 2000);
});       
</script>


<!-- /140800857/kun-test-responsive -->
<p>Test Slot 0 (responsive size)</p>
<div id='div-gpt-ad-1508218762426-0'>
<script>
googletag.cmd.push(function() { googletag.display('div-gpt-ad-1508218762426-0'); });
</script>
</div>

<p>Test Slot 1</p>
<div id='div-gpt-ad-1508218762426-1'>
<script>
googletag.cmd.push(function() { googletag.display('div-gpt-ad-1508218762426-1'); });
</script>
</div>

<p>Test Slot 2</p>
<div id='div-gpt-ad-1508218762426-2'>
<script>
googletag.cmd.push(function() { googletag.display('div-gpt-ad-1508218762426-2'); });
</script>
</div>


<p>Test Slot 3</p>
<div id='div-gpt-ad-1508218762426-3'>
<script>
googletag.cmd.push(function() { googletag.display('div-gpt-ad-1508218762426-3'); });
</script>
</div>


<p>Test Slot Out of page</p>
<div id='kun-test-oop'>
<script>
googletag.cmd.push(function() { googletag.display('kun-test-oop'); });
</script>
</div>

<br>
<br>
<p>== CDB PASSBACK insider Ad Server ==</p>
<!-- BEGIN CRITEO CDB -->
<script async='async' type="text/javascript" src="//static.criteo.net/js/ld/publishertag.js"></script>
<!-- CRITEO SLOT DIV ID, MUST BE UNIQUE PER FRAME -->
<div id="criteo_slot_1416087"></div>
<script>
    !function(){
        /* CRITEO ZONE ID, SLOT DIV ID */
        var criteoZoneId = 1416087;
        var criteoSlotId = "criteo_slot_1416087";
         
        var passback = function () {
            /* CONFIG YOUR PASSBACK HERE, USE ASYNC JS */
            //console.log("passback");
        }
 
        var CriteoAdUnits = { "placements": [{ "slotid": criteoSlotId, "zoneid": criteoZoneId }]};
        window.Criteo = window.Criteo || {}; window.Criteo.events = window.Criteo.events || [];
        var processCdbBid = function() {
            var bids = Criteo.GetBidsForAdUnit(criteoSlotId);
            if (bids.length > 0) {
                var bidFound = bids[0]; Criteo.RenderAd({ bidId: bidFound.id, containerId: bidFound.impressionId });
            } else { passback();}
        };
        Criteo.events.push(function() { Criteo.RequestBids(CriteoAdUnits, processCdbBid, 2000);});
    }();
</script>
<!-- END CRITEO CDB -->
